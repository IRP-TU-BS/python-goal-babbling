[tox]
env_list = docs

[testenv:docs]
description: build Sphinx documentation
extras = 
    doc # install package with optional dependencies listed under 'doc'
commands =
    # remove generated HTML files:
    python -c "import shutil; from pathlib import Path; html_path=Path().cwd().joinpath('docs', 'build', 'html'); shutil.rmtree(html_path) if html_path.is_dir() else None"
    # remove all .rst files generated by sphinx-apidoc:
    python -c "import os; from pathlib import Path; [os.remove(file) for file in list(Path().cwd().joinpath('docs', 'source').iterdir()) if file.match('pygb*.rst') or file.match('modules.rst')]"
    # build module and package documentation:
    sphinx-apidoc -f -o docs/source src/pygb
    # build documentation:
    sphinx-build -b html docs/source docs/build/html